{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isLocalURL = isLocalURL;\nexports.interpolateAs = interpolateAs;\nexports.resolveHref = resolveHref;\nexports.createKey = createKey;\nexports.default = void 0;\n\nvar _normalizeTrailingSlash = require(\"../../../client/normalize-trailing-slash\");\n\nvar _removeTrailingSlash = require(\"./utils/remove-trailing-slash\");\n\nvar _routeLoader = require(\"../../../client/route-loader\");\n\nvar _script = require(\"../../../client/script\");\n\nvar _isError = _interopRequireWildcard(require(\"../../../lib/is-error\"));\n\nvar _denormalizePagePath = require(\"../page-path/denormalize-page-path\");\n\nvar _normalizeLocalePath = require(\"../i18n/normalize-locale-path\");\n\nvar _mitt = _interopRequireDefault(require(\"../mitt\"));\n\nvar _utils = require(\"../utils\");\n\nvar _isDynamic = require(\"./utils/is-dynamic\");\n\nvar _parseRelativeUrl = require(\"./utils/parse-relative-url\");\n\nvar _querystring = require(\"./utils/querystring\");\n\nvar _resolveRewrites = _interopRequireDefault(require(\"./utils/resolve-rewrites\"));\n\nvar _routeMatcher = require(\"./utils/route-matcher\");\n\nvar _routeRegex = require(\"./utils/route-regex\");\n\nvar _formatUrl = require(\"./utils/format-url\");\n\nvar _detectDomainLocale = require(\"../../../client/detect-domain-locale\");\n\nvar _parsePath = require(\"./utils/parse-path\");\n\nvar _addLocale = require(\"../../../client/add-locale\");\n\nvar _removeLocale = require(\"../../../client/remove-locale\");\n\nvar _removeBasePath = require(\"../../../client/remove-base-path\");\n\nvar _addBasePath = require(\"../../../client/add-base-path\");\n\nvar _hasBasePath = require(\"../../../client/has-base-path\");\n\nvar _getNextPathnameInfo = require(\"./utils/get-next-pathname-info\");\n\nvar _formatNextPathnameInfo = require(\"./utils/format-next-pathname-info\");\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function () {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction buildCancellationError() {\n  return Object.assign(new Error('Route Cancelled'), {\n    cancelled: true\n  });\n}\n\nfunction isLocalURL(url) {\n  // prevent a hydration mismatch on href for url with anchor refs\n  if (!(0, _utils).isAbsoluteUrl(url)) return true;\n\n  try {\n    // absolute urls can be local if they are on the same origin\n    const locationOrigin = (0, _utils).getLocationOrigin();\n    const resolved = new URL(url, locationOrigin);\n    return resolved.origin === locationOrigin && (0, _hasBasePath).hasBasePath(resolved.pathname);\n  } catch (_) {\n    return false;\n  }\n}\n\nfunction interpolateAs(route, asPathname, query) {\n  let interpolatedRoute = '';\n  const dynamicRegex = (0, _routeRegex).getRouteRegex(route);\n  const dynamicGroups = dynamicRegex.groups;\n  const dynamicMatches = // Try to match the dynamic route against the asPath\n  (asPathname !== route ? (0, _routeMatcher).getRouteMatcher(dynamicRegex)(asPathname) : '') || // Fall back to reading the values from the href\n  // TODO: should this take priority; also need to change in the router.\n  query;\n  interpolatedRoute = route;\n  const params = Object.keys(dynamicGroups);\n\n  if (!params.every(param => {\n    let value = dynamicMatches[param] || '';\n    const {\n      repeat,\n      optional\n    } = dynamicGroups[param]; // support single-level catch-all\n    // TODO: more robust handling for user-error (passing `/`)\n\n    let replaced = `[${repeat ? '...' : ''}${param}]`;\n\n    if (optional) {\n      replaced = `${!value ? '/' : ''}[${replaced}]`;\n    }\n\n    if (repeat && !Array.isArray(value)) value = [value];\n    return (optional || param in dynamicMatches) && ( // Interpolate group into data URL if present\n    interpolatedRoute = interpolatedRoute.replace(replaced, repeat ? value.map( // these values should be fully encoded instead of just\n    // path delimiter escaped since they are being inserted\n    // into the URL and we expect URL encoded segments\n    // when parsing dynamic route params\n    segment => encodeURIComponent(segment)).join('/') : encodeURIComponent(value)) || '/');\n  })) {\n    interpolatedRoute = '' // did not satisfy all requirements\n    ; // n.b. We ignore this error because we handle warning for this case in\n    // development in the `<Link>` component directly.\n  }\n\n  return {\n    params,\n    result: interpolatedRoute\n  };\n}\n\nfunction omit(object, keys) {\n  const omitted = {};\n  Object.keys(object).forEach(key => {\n    if (!keys.includes(key)) {\n      omitted[key] = object[key];\n    }\n  });\n  return omitted;\n}\n\nfunction resolveHref(router, href, resolveAs) {\n  // we use a dummy base url for relative urls\n  let base;\n  let urlAsString = typeof href === 'string' ? href : (0, _formatUrl).formatWithValidation(href); // repeated slashes and backslashes in the URL are considered\n  // invalid and will never match a Next.js page/file\n\n  const urlProtoMatch = urlAsString.match(/^[a-zA-Z]{1,}:\\/\\//);\n  const urlAsStringNoProto = urlProtoMatch ? urlAsString.slice(urlProtoMatch[0].length) : urlAsString;\n  const urlParts = urlAsStringNoProto.split('?');\n\n  if ((urlParts[0] || '').match(/(\\/\\/|\\\\)/)) {\n    console.error(`Invalid href passed to next/router: ${urlAsString}, repeated forward-slashes (//) or backslashes \\\\ are not valid in the href`);\n    const normalizedUrl = (0, _utils).normalizeRepeatedSlashes(urlAsStringNoProto);\n    urlAsString = (urlProtoMatch ? urlProtoMatch[0] : '') + normalizedUrl;\n  } // Return because it cannot be routed by the Next.js router\n\n\n  if (!isLocalURL(urlAsString)) {\n    return resolveAs ? [urlAsString] : urlAsString;\n  }\n\n  try {\n    base = new URL(urlAsString.startsWith('#') ? router.asPath : router.pathname, 'http://n');\n  } catch (_) {\n    // fallback to / for invalid asPath values e.g. //\n    base = new URL('/', 'http://n');\n  }\n\n  try {\n    const finalUrl = new URL(urlAsString, base);\n    finalUrl.pathname = (0, _normalizeTrailingSlash).normalizePathTrailingSlash(finalUrl.pathname);\n    let interpolatedAs = '';\n\n    if ((0, _isDynamic).isDynamicRoute(finalUrl.pathname) && finalUrl.searchParams && resolveAs) {\n      const query = (0, _querystring).searchParamsToUrlQuery(finalUrl.searchParams);\n      const {\n        result,\n        params\n      } = interpolateAs(finalUrl.pathname, finalUrl.pathname, query);\n\n      if (result) {\n        interpolatedAs = (0, _formatUrl).formatWithValidation({\n          pathname: result,\n          hash: finalUrl.hash,\n          query: omit(query, params)\n        });\n      }\n    } // if the origin didn't change, it means we received a relative href\n\n\n    const resolvedHref = finalUrl.origin === base.origin ? finalUrl.href.slice(finalUrl.origin.length) : finalUrl.href;\n    return resolveAs ? [resolvedHref, interpolatedAs || resolvedHref] : resolvedHref;\n  } catch (_1) {\n    return resolveAs ? [urlAsString] : urlAsString;\n  }\n}\n\nfunction stripOrigin(url) {\n  const origin = (0, _utils).getLocationOrigin();\n  return url.startsWith(origin) ? url.substring(origin.length) : url;\n}\n\nfunction prepareUrlAs(router, url, as) {\n  // If url and as provided as an object representation,\n  // we'll format them into the string version here.\n  let [resolvedHref, resolvedAs] = resolveHref(router, url, true);\n  const origin = (0, _utils).getLocationOrigin();\n  const hrefHadOrigin = resolvedHref.startsWith(origin);\n  const asHadOrigin = resolvedAs && resolvedAs.startsWith(origin);\n  resolvedHref = stripOrigin(resolvedHref);\n  resolvedAs = resolvedAs ? stripOrigin(resolvedAs) : resolvedAs;\n  const preparedUrl = hrefHadOrigin ? resolvedHref : (0, _addBasePath).addBasePath(resolvedHref);\n  const preparedAs = as ? stripOrigin(resolveHref(router, as)) : resolvedAs || resolvedHref;\n  return {\n    url: preparedUrl,\n    as: asHadOrigin ? preparedAs : (0, _addBasePath).addBasePath(preparedAs)\n  };\n}\n\nfunction resolveDynamicRoute(pathname, pages) {\n  const cleanPathname = (0, _removeTrailingSlash).removeTrailingSlash((0, _denormalizePagePath).denormalizePagePath(pathname));\n\n  if (cleanPathname === '/404' || cleanPathname === '/_error') {\n    return pathname;\n  } // handle resolving href for dynamic routes\n\n\n  if (!pages.includes(cleanPathname)) {\n    // eslint-disable-next-line array-callback-return\n    pages.some(page => {\n      if ((0, _isDynamic).isDynamicRoute(page) && (0, _routeRegex).getRouteRegex(page).re.test(cleanPathname)) {\n        pathname = page;\n        return true;\n      }\n    });\n  }\n\n  return (0, _removeTrailingSlash).removeTrailingSlash(pathname);\n}\n\nconst manualScrollRestoration = process.env.__NEXT_SCROLL_RESTORATION && typeof window !== 'undefined' && 'scrollRestoration' in window.history && !!function () {\n  try {\n    let v = '__next'; // eslint-disable-next-line no-sequences\n\n    return sessionStorage.setItem(v, v), sessionStorage.removeItem(v), true;\n  } catch (n) {}\n}();\nconst SSG_DATA_NOT_FOUND = Symbol('SSG_DATA_NOT_FOUND');\n\nfunction fetchRetry(url, attempts, options) {\n  return fetch(url, {\n    // Cookies are required to be present for Next.js' SSG \"Preview Mode\".\n    // Cookies may also be required for `getServerSideProps`.\n    //\n    // > `fetch` won’t send cookies, unless you set the credentials init\n    // > option.\n    // https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\n    //\n    // > For maximum browser compatibility when it comes to sending &\n    // > receiving cookies, always supply the `credentials: 'same-origin'`\n    // > option instead of relying on the default.\n    // https://github.com/github/fetch#caveats\n    credentials: 'same-origin',\n    method: options.method || 'GET',\n    headers: Object.assign({}, options.headers, {\n      'x-nextjs-data': '1'\n    })\n  }).then(response => {\n    return !response.ok && attempts > 1 && response.status >= 500 ? fetchRetry(url, attempts - 1, options) : response;\n  });\n}\n\nconst backgroundCache = {};\n\nfunction fetchNextData(_ref) {\n  let {\n    dataHref,\n    inflightCache,\n    isPrefetch,\n    hasMiddleware,\n    isServerRender,\n    parseJSON,\n    persistCache,\n    isBackground,\n    unstable_skipClientCache\n  } = _ref;\n  const {\n    href: cacheKey\n  } = new URL(dataHref, window.location.href);\n  var ref1;\n\n  const getData = params => {\n    return fetchRetry(dataHref, isServerRender ? 3 : 1, {\n      headers: isPrefetch ? {\n        purpose: 'prefetch'\n      } : {},\n      method: (ref1 = params == null ? void 0 : params.method) != null ? ref1 : 'GET'\n    }).then(response => {\n      if (response.ok && (params == null ? void 0 : params.method) === 'HEAD') {\n        return {\n          dataHref,\n          response,\n          text: '',\n          json: {}\n        };\n      }\n\n      return response.text().then(text => {\n        if (!response.ok) {\n          /**\n          * When the data response is a redirect because of a middleware\n          * we do not consider it an error. The headers must bring the\n          * mapped location.\n          * TODO: Change the status code in the handler.\n          */\n          if (hasMiddleware && [301, 302, 307, 308].includes(response.status)) {\n            return {\n              dataHref,\n              response,\n              text,\n              json: {}\n            };\n          }\n\n          if (response.status === 404) {\n            var ref;\n\n            if ((ref = tryToParseAsJSON(text)) == null ? void 0 : ref.notFound) {\n              return {\n                dataHref,\n                json: {\n                  notFound: SSG_DATA_NOT_FOUND\n                },\n                response,\n                text\n              };\n            }\n            /**\n            * If there is a 404 that is not for SSG we used to fail but if\n            * there is a middleware we must respond with an empty object.\n            * For now we will return the data when there is a middleware.\n            * TODO: Update the server to success on these requests.\n            */\n\n\n            if (hasMiddleware) {\n              return {\n                dataHref,\n                response,\n                text,\n                json: {}\n              };\n            }\n          }\n\n          const error = new Error(`Failed to load static props`);\n          /**\n          * We should only trigger a server-side transition if this was\n          * caused on a client-side transition. Otherwise, we'd get into\n          * an infinite loop.\n          */\n\n          if (!isServerRender) {\n            (0, _routeLoader).markAssetError(error);\n          }\n\n          throw error;\n        }\n\n        return {\n          dataHref,\n          json: parseJSON ? tryToParseAsJSON(text) : {},\n          response,\n          text\n        };\n      });\n    }).then(data => {\n      if (!persistCache || process.env.NODE_ENV !== 'production' || data.response.headers.get('x-middleware-cache') === 'no-cache') {\n        delete inflightCache[cacheKey];\n      }\n\n      return data;\n    }).catch(err => {\n      delete inflightCache[cacheKey];\n      throw err;\n    });\n  }; // when skipping client cache we wait to update\n  // inflight cache until successful data response\n  // this allows racing click event with fetching newer data\n  // without blocking navigation when stale data is available\n\n\n  if (unstable_skipClientCache && persistCache) {\n    return getData({}).then(data => {\n      inflightCache[cacheKey] = Promise.resolve(data);\n      return data;\n    });\n  }\n\n  if (inflightCache[cacheKey] !== undefined) {\n    return inflightCache[cacheKey];\n  }\n\n  return inflightCache[cacheKey] = getData(isBackground ? {\n    method: 'HEAD'\n  } : {});\n}\n\nfunction tryToParseAsJSON(text) {\n  try {\n    return JSON.parse(text);\n  } catch (error) {\n    return {};\n  }\n}\n\nfunction createKey() {\n  return Math.random().toString(36).slice(2, 10);\n}\n\nfunction handleHardNavigation(_ref2) {\n  let {\n    url,\n    router\n  } = _ref2;\n\n  // ensure we don't trigger a hard navigation to the same\n  // URL as this can end up with an infinite refresh\n  if (url === (0, _addBasePath).addBasePath((0, _addLocale).addLocale(router.asPath, router.locale))) {\n    throw new Error(`Invariant: attempted to hard navigate to the same URL ${url} ${location.href}`);\n  }\n\n  window.location.href = url;\n}\n\nconst getCancelledHandler = _ref3 => {\n  let {\n    route,\n    router\n  } = _ref3;\n  let cancelled = false;\n\n  const cancel = router.clc = () => {\n    cancelled = true;\n  };\n\n  const handleCancelled = () => {\n    if (cancelled) {\n      const error = new Error(`Abort fetching component for route: \"${route}\"`);\n      error.cancelled = true;\n      throw error;\n    }\n\n    if (cancel === router.clc) {\n      router.clc = null;\n    }\n  };\n\n  return handleCancelled;\n};\n\nclass Router {\n  reload() {\n    window.location.reload();\n  }\n  /**\n  * Go back in history\n  */\n\n\n  back() {\n    window.history.back();\n  }\n  /**\n  * Performs a `pushState` with arguments\n  * @param url of the route\n  * @param as masks `url` for the browser\n  * @param options object you can define `shallow` and other options\n  */\n\n\n  push(url, as) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    if (process.env.__NEXT_SCROLL_RESTORATION) {\n      // TODO: remove in the future when we update history before route change\n      // is complete, as the popstate event should handle this capture.\n      if (manualScrollRestoration) {\n        try {\n          // Snapshot scroll position right before navigating to a new page:\n          sessionStorage.setItem('__next_scroll_' + this._key, JSON.stringify({\n            x: self.pageXOffset,\n            y: self.pageYOffset\n          }));\n        } catch (e) {}\n      }\n    }\n\n    ({\n      url,\n      as\n    } = prepareUrlAs(this, url, as));\n    return this.change('pushState', url, as, options);\n  }\n  /**\n  * Performs a `replaceState` with arguments\n  * @param url of the route\n  * @param as masks `url` for the browser\n  * @param options object you can define `shallow` and other options\n  */\n\n\n  replace(url, as) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    ({\n      url,\n      as\n    } = prepareUrlAs(this, url, as));\n    return this.change('replaceState', url, as, options);\n  }\n\n  change(method, url, as, options, forcedScroll) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (!isLocalURL(url)) {\n        handleHardNavigation({\n          url,\n          router: _this\n        });\n        return false;\n      } // WARNING: `_h` is an internal option for handing Next.js client-side\n      // hydration. Your app should _never_ use this property. It may change at\n      // any time without notice.\n\n\n      const isQueryUpdating = options._h;\n      const shouldResolveHref = isQueryUpdating || options._shouldResolveHref || (0, _parsePath).parsePath(url).pathname === (0, _parsePath).parsePath(as).pathname;\n\n      const nextState = _extends({}, _this.state); // for static pages with query params in the URL we delay\n      // marking the router ready until after the query is updated\n      // or a navigation has occurred\n\n\n      _this.isReady = true;\n      const isSsr = _this.isSsr;\n\n      if (!isQueryUpdating) {\n        _this.isSsr = false;\n      } // if a route transition is already in progress before\n      // the query updating is triggered ignore query updating\n\n\n      if (isQueryUpdating && _this.clc) {\n        return false;\n      }\n\n      const prevLocale = nextState.locale;\n\n      if (process.env.__NEXT_I18N_SUPPORT) {\n        nextState.locale = options.locale === false ? _this.defaultLocale : options.locale || nextState.locale;\n\n        if (typeof options.locale === 'undefined') {\n          options.locale = nextState.locale;\n        }\n\n        const parsedAs = (0, _parseRelativeUrl).parseRelativeUrl((0, _hasBasePath).hasBasePath(as) ? (0, _removeBasePath).removeBasePath(as) : as);\n        const localePathResult = (0, _normalizeLocalePath).normalizeLocalePath(parsedAs.pathname, _this.locales);\n\n        if (localePathResult.detectedLocale) {\n          nextState.locale = localePathResult.detectedLocale;\n          parsedAs.pathname = (0, _addBasePath).addBasePath(parsedAs.pathname);\n          as = (0, _formatUrl).formatWithValidation(parsedAs);\n          url = (0, _addBasePath).addBasePath((0, _normalizeLocalePath).normalizeLocalePath((0, _hasBasePath).hasBasePath(url) ? (0, _removeBasePath).removeBasePath(url) : url, _this.locales).pathname);\n        }\n\n        let didNavigate = false; // we need to wrap this in the env check again since regenerator runtime\n        // moves this on its own due to the return\n\n        if (process.env.__NEXT_I18N_SUPPORT) {\n          var ref; // if the locale isn't configured hard navigate to show 404 page\n\n          if (!((ref = _this.locales) == null ? void 0 : ref.includes(nextState.locale))) {\n            parsedAs.pathname = (0, _addLocale).addLocale(parsedAs.pathname, nextState.locale);\n            handleHardNavigation({\n              url: (0, _formatUrl).formatWithValidation(parsedAs),\n              router: _this\n            }); // this was previously a return but was removed in favor\n            // of better dead code elimination with regenerator runtime\n\n            didNavigate = true;\n          }\n        }\n\n        const detectedDomain = (0, _detectDomainLocale).detectDomainLocale(_this.domainLocales, undefined, nextState.locale); // we need to wrap this in the env check again since regenerator runtime\n        // moves this on its own due to the return\n\n        if (process.env.__NEXT_I18N_SUPPORT) {\n          // if we are navigating to a domain locale ensure we redirect to the\n          // correct domain\n          if (!didNavigate && detectedDomain && _this.isLocaleDomain && self.location.hostname !== detectedDomain.domain) {\n            const asNoBasePath = (0, _removeBasePath).removeBasePath(as);\n            handleHardNavigation({\n              url: `http${detectedDomain.http ? '' : 's'}://${detectedDomain.domain}${(0, _addBasePath).addBasePath(`${nextState.locale === detectedDomain.defaultLocale ? '' : `/${nextState.locale}`}${asNoBasePath === '/' ? '' : asNoBasePath}` || '/')}`,\n              router: _this\n            }); // this was previously a return but was removed in favor\n            // of better dead code elimination with regenerator runtime\n\n            didNavigate = true;\n          }\n        }\n\n        if (didNavigate) {\n          return new Promise(() => {});\n        }\n      } // marking route changes as a navigation start entry\n\n\n      if (_utils.ST) {\n        performance.mark('routeChange');\n      }\n\n      const {\n        shallow = false,\n        scroll = true\n      } = options;\n      const routeProps = {\n        shallow\n      };\n\n      if (_this._inFlightRoute && _this.clc) {\n        if (!isSsr) {\n          Router.events.emit('routeChangeError', buildCancellationError(), _this._inFlightRoute, routeProps);\n        }\n\n        _this.clc();\n\n        _this.clc = null;\n      }\n\n      as = (0, _addBasePath).addBasePath((0, _addLocale).addLocale((0, _hasBasePath).hasBasePath(as) ? (0, _removeBasePath).removeBasePath(as) : as, options.locale, _this.defaultLocale));\n      const cleanedAs = (0, _removeLocale).removeLocale((0, _hasBasePath).hasBasePath(as) ? (0, _removeBasePath).removeBasePath(as) : as, nextState.locale);\n      _this._inFlightRoute = as;\n      let localeChange = prevLocale !== nextState.locale; // If the url change is only related to a hash change\n      // We should not proceed. We should only change the state.\n\n      if (!isQueryUpdating && _this.onlyAHashChange(cleanedAs) && !localeChange) {\n        nextState.asPath = cleanedAs;\n        Router.events.emit('hashChangeStart', as, routeProps); // TODO: do we need the resolved href when only a hash change?\n\n        _this.changeState(method, url, as, _extends({}, options, {\n          scroll: false\n        }));\n\n        if (scroll) {\n          _this.scrollToHash(cleanedAs);\n        }\n\n        try {\n          yield _this.set(nextState, _this.components[nextState.route], null);\n        } catch (err) {\n          if ((0, _isError).default(err) && err.cancelled) {\n            Router.events.emit('routeChangeError', err, cleanedAs, routeProps);\n          }\n\n          throw err;\n        }\n\n        Router.events.emit('hashChangeComplete', as, routeProps);\n        return true;\n      }\n\n      let parsed = (0, _parseRelativeUrl).parseRelativeUrl(url);\n      let {\n        pathname,\n        query\n      } = parsed; // The build manifest needs to be loaded before auto-static dynamic pages\n      // get their query parameters to allow ensuring they can be parsed properly\n      // when rewritten to\n\n      let pages, rewrites;\n\n      try {\n        [pages, {\n          __rewrites: rewrites\n        }] = yield Promise.all([_this.pageLoader.getPageList(), (0, _routeLoader).getClientBuildManifest(), _this.pageLoader.getMiddlewareList()]);\n      } catch (err) {\n        // If we fail to resolve the page list or client-build manifest, we must\n        // do a server-side transition:\n        handleHardNavigation({\n          url: as,\n          router: _this\n        });\n        return false;\n      } // If asked to change the current URL we should reload the current page\n      // (not location.reload() but reload getInitialProps and other Next.js stuffs)\n      // We also need to set the method = replaceState always\n      // as this should not go into the history (That's how browsers work)\n      // We should compare the new asPath to the current asPath, not the url\n\n\n      if (!_this.urlIsNew(cleanedAs) && !localeChange) {\n        method = 'replaceState';\n      } // we need to resolve the as value using rewrites for dynamic SSG\n      // pages to allow building the data URL correctly\n\n\n      let resolvedAs = as; // url and as should always be prefixed with basePath by this\n      // point by either next/link or router.push/replace so strip the\n      // basePath from the pathname to match the pages dir 1-to-1\n\n      pathname = pathname ? (0, _removeTrailingSlash).removeTrailingSlash((0, _removeBasePath).removeBasePath(pathname)) : pathname; // we don't attempt resolve asPath when we need to execute\n      // middleware as the resolving will occur server-side\n\n      const isMiddlewareMatch = yield matchesMiddleware({\n        asPath: as,\n        locale: nextState.locale,\n        router: _this\n      });\n\n      if (options.shallow && isMiddlewareMatch) {\n        pathname = _this.pathname;\n      }\n\n      if (shouldResolveHref && pathname !== '/_error') {\n        options._shouldResolveHref = true;\n\n        if (process.env.__NEXT_HAS_REWRITES && as.startsWith('/')) {\n          const rewritesResult = (0, _resolveRewrites).default((0, _addBasePath).addBasePath((0, _addLocale).addLocale(cleanedAs, nextState.locale), true), pages, rewrites, query, p => resolveDynamicRoute(p, pages), _this.locales);\n\n          if (rewritesResult.externalDest) {\n            handleHardNavigation({\n              url: as,\n              router: _this\n            });\n            return true;\n          }\n\n          if (!isMiddlewareMatch) {\n            resolvedAs = rewritesResult.asPath;\n          }\n\n          if (rewritesResult.matchedPage && rewritesResult.resolvedHref) {\n            // if this directly matches a page we need to update the href to\n            // allow the correct page chunk to be loaded\n            pathname = rewritesResult.resolvedHref;\n            parsed.pathname = (0, _addBasePath).addBasePath(pathname);\n\n            if (!isMiddlewareMatch) {\n              url = (0, _formatUrl).formatWithValidation(parsed);\n            }\n          }\n        } else {\n          parsed.pathname = resolveDynamicRoute(pathname, pages);\n\n          if (parsed.pathname !== pathname) {\n            pathname = parsed.pathname;\n            parsed.pathname = (0, _addBasePath).addBasePath(pathname);\n\n            if (!isMiddlewareMatch) {\n              url = (0, _formatUrl).formatWithValidation(parsed);\n            }\n          }\n        }\n      }\n\n      if (!isLocalURL(as)) {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error(`Invalid href: \"${url}\" and as: \"${as}\", received relative href and external as` + `\\nSee more info: https://nextjs.org/docs/messages/invalid-relative-url-external-as`);\n        }\n\n        handleHardNavigation({\n          url: as,\n          router: _this\n        });\n        return false;\n      }\n\n      resolvedAs = (0, _removeLocale).removeLocale((0, _removeBasePath).removeBasePath(resolvedAs), nextState.locale);\n      let route = (0, _removeTrailingSlash).removeTrailingSlash(pathname);\n      let routeMatch = false;\n\n      if ((0, _isDynamic).isDynamicRoute(route)) {\n        const parsedAs = (0, _parseRelativeUrl).parseRelativeUrl(resolvedAs);\n        const asPathname = parsedAs.pathname;\n        const routeRegex = (0, _routeRegex).getRouteRegex(route);\n        routeMatch = (0, _routeMatcher).getRouteMatcher(routeRegex)(asPathname);\n        const shouldInterpolate = route === asPathname;\n        const interpolatedAs = shouldInterpolate ? interpolateAs(route, asPathname, query) : {};\n\n        if (!routeMatch || shouldInterpolate && !interpolatedAs.result) {\n          const missingParams = Object.keys(routeRegex.groups).filter(param => !query[param]);\n\n          if (missingParams.length > 0 && !isMiddlewareMatch) {\n            if (process.env.NODE_ENV !== 'production') {\n              console.warn(`${shouldInterpolate ? `Interpolating href` : `Mismatching \\`as\\` and \\`href\\``} failed to manually provide ` + `the params: ${missingParams.join(', ')} in the \\`href\\`'s \\`query\\``);\n            }\n\n            throw new Error((shouldInterpolate ? `The provided \\`href\\` (${url}) value is missing query values (${missingParams.join(', ')}) to be interpolated properly. ` : `The provided \\`as\\` value (${asPathname}) is incompatible with the \\`href\\` value (${route}). `) + `Read more: https://nextjs.org/docs/messages/${shouldInterpolate ? 'href-interpolation-failed' : 'incompatible-href-as'}`);\n          }\n        } else if (shouldInterpolate) {\n          as = (0, _formatUrl).formatWithValidation(Object.assign({}, parsedAs, {\n            pathname: interpolatedAs.result,\n            query: omit(query, interpolatedAs.params)\n          }));\n        } else {\n          // Merge params into `query`, overwriting any specified in search\n          Object.assign(query, routeMatch);\n        }\n      }\n\n      if (!isQueryUpdating) {\n        Router.events.emit('routeChangeStart', as, routeProps);\n      }\n\n      try {\n        var ref2, ref3;\n        let routeInfo = yield _this.getRouteInfo({\n          route,\n          pathname,\n          query,\n          as,\n          resolvedAs,\n          routeProps,\n          locale: nextState.locale,\n          isPreview: nextState.isPreview,\n          hasMiddleware: isMiddlewareMatch\n        });\n\n        if ('route' in routeInfo && isMiddlewareMatch) {\n          pathname = routeInfo.route || route;\n          route = pathname;\n          query = Object.assign({}, routeInfo.query || {}, query);\n\n          if (routeMatch && pathname !== parsed.pathname) {\n            Object.keys(routeMatch).forEach(key => {\n              if (routeMatch && query[key] === routeMatch[key]) {\n                delete query[key];\n              }\n            });\n          }\n\n          if ((0, _isDynamic).isDynamicRoute(pathname)) {\n            const prefixedAs = routeInfo.resolvedAs || (0, _addBasePath).addBasePath((0, _addLocale).addLocale(as, nextState.locale), true);\n            let rewriteAs = prefixedAs;\n\n            if ((0, _hasBasePath).hasBasePath(rewriteAs)) {\n              rewriteAs = (0, _removeBasePath).removeBasePath(rewriteAs);\n            }\n\n            if (process.env.__NEXT_I18N_SUPPORT) {\n              const localeResult = (0, _normalizeLocalePath).normalizeLocalePath(rewriteAs, _this.locales);\n              nextState.locale = localeResult.detectedLocale || nextState.locale;\n              rewriteAs = localeResult.pathname;\n            }\n\n            const routeRegex = (0, _routeRegex).getRouteRegex(pathname);\n            const curRouteMatch = (0, _routeMatcher).getRouteMatcher(routeRegex)(rewriteAs);\n\n            if (curRouteMatch) {\n              Object.assign(query, curRouteMatch);\n            }\n          }\n        } // If the routeInfo brings a redirect we simply apply it.\n\n\n        if ('type' in routeInfo) {\n          if (routeInfo.type === 'redirect-internal') {\n            return _this.change(method, routeInfo.newUrl, routeInfo.newAs, options);\n          } else {\n            handleHardNavigation({\n              url: routeInfo.destination,\n              router: _this\n            });\n            return new Promise(() => {});\n          }\n        }\n\n        let {\n          error,\n          props,\n          __N_SSG,\n          __N_SSP\n        } = routeInfo;\n        const component = routeInfo.Component;\n\n        if (component && component.unstable_scriptLoader) {\n          const scripts = [].concat(component.unstable_scriptLoader());\n          scripts.forEach(script => {\n            (0, _script).handleClientScriptLoad(script.props);\n          });\n        } // handle redirect on client-transition\n\n\n        if ((__N_SSG || __N_SSP) && props) {\n          if (props.pageProps && props.pageProps.__N_REDIRECT) {\n            // Use the destination from redirect without adding locale\n            options.locale = false;\n            const destination = props.pageProps.__N_REDIRECT; // check if destination is internal (resolves to a page) and attempt\n            // client-navigation if it is falling back to hard navigation if\n            // it's not\n\n            if (destination.startsWith('/') && props.pageProps.__N_REDIRECT_BASE_PATH !== false) {\n              const parsedHref = (0, _parseRelativeUrl).parseRelativeUrl(destination);\n              parsedHref.pathname = resolveDynamicRoute(parsedHref.pathname, pages);\n              const {\n                url: newUrl,\n                as: newAs\n              } = prepareUrlAs(_this, destination, destination);\n              return _this.change(method, newUrl, newAs, options);\n            }\n\n            handleHardNavigation({\n              url: destination,\n              router: _this\n            });\n            return new Promise(() => {});\n          }\n\n          nextState.isPreview = !!props.__N_PREVIEW; // handle SSG data 404\n\n          if (props.notFound === SSG_DATA_NOT_FOUND) {\n            let notFoundRoute;\n\n            try {\n              yield _this.fetchComponent('/404');\n              notFoundRoute = '/404';\n            } catch (_) {\n              notFoundRoute = '/_error';\n            }\n\n            routeInfo = yield _this.getRouteInfo({\n              route: notFoundRoute,\n              pathname: notFoundRoute,\n              query,\n              as,\n              resolvedAs,\n              routeProps: {\n                shallow: false\n              },\n              locale: nextState.locale,\n              isPreview: nextState.isPreview\n            });\n\n            if ('type' in routeInfo) {\n              throw new Error(`Unexpected middleware effect on /404`);\n            }\n          }\n        }\n\n        Router.events.emit('beforeHistoryChange', as, routeProps);\n\n        _this.changeState(method, url, as, options);\n\n        if (isQueryUpdating && pathname === '/_error' && ((ref2 = self.__NEXT_DATA__.props) == null ? void 0 : (ref3 = ref2.pageProps) == null ? void 0 : ref3.statusCode) === 500 && (props == null ? void 0 : props.pageProps)) {\n          // ensure statusCode is still correct for static 500 page\n          // when updating query information\n          props.pageProps.statusCode = 500;\n        }\n\n        var _route; // shallow routing is only allowed for same page URL changes.\n\n\n        const isValidShallowRoute = options.shallow && nextState.route === ((_route = routeInfo.route) != null ? _route : route);\n\n        var _scroll;\n\n        const shouldScroll = (_scroll = options.scroll) != null ? _scroll : !isValidShallowRoute;\n        const resetScroll = shouldScroll ? {\n          x: 0,\n          y: 0\n        } : null;\n        yield _this.set(_extends({}, nextState, {\n          route,\n          pathname,\n          query,\n          asPath: cleanedAs,\n          isFallback: false\n        }), routeInfo, forcedScroll != null ? forcedScroll : resetScroll).catch(e => {\n          if (e.cancelled) error = error || e;else throw e;\n        });\n\n        if (error) {\n          if (!isQueryUpdating) {\n            Router.events.emit('routeChangeError', error, cleanedAs, routeProps);\n          }\n\n          throw error;\n        }\n\n        if (process.env.__NEXT_I18N_SUPPORT) {\n          if (nextState.locale) {\n            document.documentElement.lang = nextState.locale;\n          }\n        }\n\n        if (!isQueryUpdating) {\n          Router.events.emit('routeChangeComplete', as, routeProps);\n        } // A hash mark # is the optional last part of a URL\n\n\n        const hashRegex = /#.+$/;\n\n        if (shouldScroll && hashRegex.test(as)) {\n          _this.scrollToHash(as);\n        }\n\n        return true;\n      } catch (err1) {\n        if ((0, _isError).default(err1) && err1.cancelled) {\n          return false;\n        }\n\n        throw err1;\n      }\n    })();\n  }\n\n  changeState(method, url, as) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof window.history === 'undefined') {\n        console.error(`Warning: window.history is not available.`);\n        return;\n      }\n\n      if (typeof window.history[method] === 'undefined') {\n        console.error(`Warning: window.history.${method} is not available`);\n        return;\n      }\n    }\n\n    if (method !== 'pushState' || (0, _utils).getURL() !== as) {\n      this._shallow = options.shallow;\n      window.history[method]({\n        url,\n        as,\n        options,\n        __N: true,\n        key: this._key = method !== 'pushState' ? this._key : createKey()\n      }, // Most browsers currently ignores this parameter, although they may use it in the future.\n      // Passing the empty string here should be safe against future changes to the method.\n      // https://developer.mozilla.org/en-US/docs/Web/API/History/replaceState\n      '', as);\n    }\n  }\n\n  handleRouteInfoError(err, pathname, query, as, routeProps, loadErrorFail) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      console.error(err);\n\n      if (err.cancelled) {\n        // bubble up cancellation errors\n        throw err;\n      }\n\n      if ((0, _routeLoader).isAssetError(err) || loadErrorFail) {\n        Router.events.emit('routeChangeError', err, as, routeProps); // If we can't load the page it could be one of following reasons\n        //  1. Page doesn't exists\n        //  2. Page does exist in a different zone\n        //  3. Internal error while loading the page\n        // So, doing a hard reload is the proper way to deal with this.\n\n        handleHardNavigation({\n          url: as,\n          router: _this\n        }); // Changing the URL doesn't block executing the current code path.\n        // So let's throw a cancellation error stop the routing logic.\n\n        throw buildCancellationError();\n      }\n\n      try {\n        let Component;\n        let styleSheets;\n        let props;\n\n        if (typeof Component === 'undefined' || typeof styleSheets === 'undefined') {\n          ({\n            page: Component,\n            styleSheets\n          } = yield _this.fetchComponent('/_error'));\n        }\n\n        const routeInfo = {\n          props,\n          Component,\n          styleSheets,\n          err,\n          error: err\n        };\n\n        if (!routeInfo.props) {\n          try {\n            routeInfo.props = yield _this.getInitialProps(Component, {\n              err,\n              pathname,\n              query\n            });\n          } catch (gipErr) {\n            console.error('Error in error page `getInitialProps`: ', gipErr);\n            routeInfo.props = {};\n          }\n        }\n\n        return routeInfo;\n      } catch (routeInfoErr) {\n        return _this.handleRouteInfoError((0, _isError).default(routeInfoErr) ? routeInfoErr : new Error(routeInfoErr + ''), pathname, query, as, routeProps, true);\n      }\n    })();\n  }\n\n  getRouteInfo(_ref4) {\n    let {\n      route: requestedRoute,\n      pathname,\n      query,\n      as,\n      resolvedAs,\n      routeProps,\n      locale,\n      hasMiddleware,\n      isPreview,\n      unstable_skipClientCache\n    } = _ref4;\n\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      /**\n      * This `route` binding can change if there's a rewrite\n      * so we keep a reference to the original requested route\n      * so we can store the cache for it and avoid re-requesting every time\n      * for shallow routing purposes.\n      */\n      let route = requestedRoute;\n\n      try {\n        var ref, ref4, ref5;\n        const handleCancelled = getCancelledHandler({\n          route,\n          router: _this\n        });\n        let existingInfo = _this.components[route];\n\n        if (routeProps.shallow && existingInfo && _this.route === route) {\n          return existingInfo;\n        }\n\n        let cachedRouteInfo = existingInfo && !('initial' in existingInfo) && process.env.NODE_ENV !== 'development' ? existingInfo : undefined;\n        const fetchNextDataParams = {\n          dataHref: _this.pageLoader.getDataHref({\n            href: (0, _formatUrl).formatWithValidation({\n              pathname,\n              query\n            }),\n            skipInterpolation: true,\n            asPath: resolvedAs,\n            locale\n          }),\n          hasMiddleware: true,\n          isServerRender: _this.isSsr,\n          parseJSON: true,\n          inflightCache: _this.sdc,\n          persistCache: !isPreview,\n          isPrefetch: false,\n          unstable_skipClientCache\n        };\n        const data = yield withMiddlewareEffects({\n          fetchData: () => fetchNextData(fetchNextDataParams),\n          asPath: resolvedAs,\n          locale: locale,\n          router: _this\n        });\n        handleCancelled();\n\n        if ((data == null ? void 0 : (ref = data.effect) == null ? void 0 : ref.type) === 'redirect-internal' || (data == null ? void 0 : (ref4 = data.effect) == null ? void 0 : ref4.type) === 'redirect-external') {\n          return data.effect;\n        }\n\n        if ((data == null ? void 0 : (ref5 = data.effect) == null ? void 0 : ref5.type) === 'rewrite') {\n          route = (0, _removeTrailingSlash).removeTrailingSlash(data.effect.resolvedHref);\n          pathname = data.effect.resolvedHref;\n          query = _extends({}, query, data.effect.parsedAs.query);\n          resolvedAs = data.effect.parsedAs.pathname; // Check again the cache with the new destination.\n\n          existingInfo = _this.components[route];\n\n          if (routeProps.shallow && existingInfo && _this.route === route && !hasMiddleware) {\n            // If we have a match with the current route due to rewrite,\n            // we can copy the existing information to the rewritten one.\n            // Then, we return the information along with the matched route.\n            _this.components[requestedRoute] = _extends({}, existingInfo, {\n              route\n            });\n            return _extends({}, existingInfo, {\n              route\n            });\n          }\n\n          cachedRouteInfo = existingInfo && !('initial' in existingInfo) && process.env.NODE_ENV !== 'development' ? existingInfo : undefined;\n        }\n\n        if (route === '/api' || route.startsWith('/api/')) {\n          handleHardNavigation({\n            url: as,\n            router: _this\n          });\n          return new Promise(() => {});\n        }\n\n        const routeInfo = cachedRouteInfo || (yield _this.fetchComponent(route).then(res => ({\n          Component: res.page,\n          styleSheets: res.styleSheets,\n          __N_SSG: res.mod.__N_SSG,\n          __N_SSP: res.mod.__N_SSP,\n          __N_RSC: !!res.mod.__next_rsc__\n        })));\n\n        if (process.env.NODE_ENV !== 'production') {\n          const {\n            isValidElementType\n          } = require('next/dist/compiled/react-is');\n\n          if (!isValidElementType(routeInfo.Component)) {\n            throw new Error(`The default export is not a React Component in page: \"${pathname}\"`);\n          }\n        }\n        /**\n        * For server components, non-SSR pages will have statically optimized\n        * flight data in a production build. So only development and SSR pages\n        * will always have the real-time generated and streamed flight data.\n        */\n\n\n        const useStreamedFlightData = routeInfo.__N_RSC && (process.env.NODE_ENV !== 'production' || routeInfo.__N_SSP);\n        const shouldFetchData = routeInfo.__N_SSG || routeInfo.__N_SSP || routeInfo.__N_RSC;\n        const {\n          props\n        } = yield _this._getData(_asyncToGenerator(function* () {\n          if (shouldFetchData && !useStreamedFlightData) {\n            const {\n              json\n            } = data || (yield fetchNextData({\n              dataHref: _this.pageLoader.getDataHref({\n                href: (0, _formatUrl).formatWithValidation({\n                  pathname,\n                  query\n                }),\n                asPath: resolvedAs,\n                locale\n              }),\n              isServerRender: _this.isSsr,\n              parseJSON: true,\n              inflightCache: _this.sdc,\n              persistCache: !isPreview,\n              isPrefetch: false,\n              unstable_skipClientCache\n            }));\n            return {\n              props: json\n            };\n          }\n\n          return {\n            headers: {},\n            props: yield _this.getInitialProps(routeInfo.Component, // we provide AppTree later so this needs to be `any`\n            {\n              pathname,\n              query,\n              asPath: as,\n              locale,\n              locales: _this.locales,\n              defaultLocale: _this.defaultLocale\n            })\n          };\n        })); // Only bust the data cache for SSP routes although\n        // middleware can skip cache per request with\n        // x-middleware-cache: no-cache as well\n\n        if (routeInfo.__N_SSP && fetchNextDataParams.dataHref) {\n          const cacheKey = new URL(fetchNextDataParams.dataHref, window.location.href).href;\n          delete _this.sdc[cacheKey];\n        } // we kick off a HEAD request in the background\n        // when a non-prefetch request is made to signal revalidation\n\n\n        if (!_this.isPreview && routeInfo.__N_SSG && process.env.NODE_ENV !== 'development') {\n          fetchNextData(Object.assign({}, fetchNextDataParams, {\n            isBackground: true,\n            persistCache: false,\n            inflightCache: backgroundCache\n          })).catch(() => {});\n        }\n\n        let flightInfo;\n\n        if (routeInfo.__N_RSC) {\n          flightInfo = {\n            __flight__: useStreamedFlightData ? (yield _this._getData(() => _this._getFlightData((0, _formatUrl).formatWithValidation({\n              query: _extends({}, query, {\n                __flight__: '1'\n              }),\n              pathname: (0, _isDynamic).isDynamicRoute(route) ? interpolateAs(pathname, (0, _parseRelativeUrl).parseRelativeUrl(resolvedAs).pathname, query).result : pathname\n            })))).data : props.__flight__\n          };\n        }\n\n        props.pageProps = Object.assign({}, props.pageProps, flightInfo);\n        routeInfo.props = props;\n        routeInfo.route = route;\n        routeInfo.query = query;\n        routeInfo.resolvedAs = resolvedAs;\n        _this.components[route] = routeInfo; // If the route was rewritten in the process of fetching data,\n        // we update the cache to allow hitting the same data for shallow requests.\n\n        if (route !== requestedRoute) {\n          _this.components[requestedRoute] = _extends({}, routeInfo, {\n            route\n          });\n        }\n\n        return routeInfo;\n      } catch (err) {\n        return _this.handleRouteInfoError((0, _isError).getProperError(err), pathname, query, as, routeProps);\n      }\n    })();\n  }\n\n  set(state, data, resetScroll) {\n    this.state = state;\n    return this.sub(data, this.components['/_app'].Component, resetScroll);\n  }\n  /**\n  * Callback to execute before replacing router state\n  * @param cb callback to be executed\n  */\n\n\n  beforePopState(cb) {\n    this._bps = cb;\n  }\n\n  onlyAHashChange(as) {\n    if (!this.asPath) return false;\n    const [oldUrlNoHash, oldHash] = this.asPath.split('#');\n    const [newUrlNoHash, newHash] = as.split('#'); // Makes sure we scroll to the provided hash if the url/hash are the same\n\n    if (newHash && oldUrlNoHash === newUrlNoHash && oldHash === newHash) {\n      return true;\n    } // If the urls are change, there's more than a hash change\n\n\n    if (oldUrlNoHash !== newUrlNoHash) {\n      return false;\n    } // If the hash has changed, then it's a hash only change.\n    // This check is necessary to handle both the enter and\n    // leave hash === '' cases. The identity case falls through\n    // and is treated as a next reload.\n\n\n    return oldHash !== newHash;\n  }\n\n  scrollToHash(as) {\n    const [, hash = ''] = as.split('#'); // Scroll to top if the hash is just `#` with no value or `#top`\n    // To mirror browsers\n\n    if (hash === '' || hash === 'top') {\n      window.scrollTo(0, 0);\n      return;\n    } // Decode hash to make non-latin anchor works.\n\n\n    const rawHash = decodeURIComponent(hash); // First we check if the element by id is found\n\n    const idEl = document.getElementById(rawHash);\n\n    if (idEl) {\n      idEl.scrollIntoView();\n      return;\n    } // If there's no element with the id, we check the `name` property\n    // To mirror browsers\n\n\n    const nameEl = document.getElementsByName(rawHash)[0];\n\n    if (nameEl) {\n      nameEl.scrollIntoView();\n    }\n  }\n\n  urlIsNew(asPath) {\n    return this.asPath !== asPath;\n  }\n  /**\n  * Prefetch page code, you may wait for the data during page rendering.\n  * This feature only works in production!\n  * @param url the href of prefetched page\n  * @param asPath the as path of the prefetched page\n  */\n\n\n  prefetch(url) {\n    let asPath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : url;\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      let parsed = (0, _parseRelativeUrl).parseRelativeUrl(url);\n      let {\n        pathname,\n        query\n      } = parsed;\n\n      if (process.env.__NEXT_I18N_SUPPORT) {\n        if (options.locale === false) {\n          pathname = (0, _normalizeLocalePath).normalizeLocalePath(pathname, _this.locales).pathname;\n          parsed.pathname = pathname;\n          url = (0, _formatUrl).formatWithValidation(parsed);\n          let parsedAs = (0, _parseRelativeUrl).parseRelativeUrl(asPath);\n          const localePathResult = (0, _normalizeLocalePath).normalizeLocalePath(parsedAs.pathname, _this.locales);\n          parsedAs.pathname = localePathResult.pathname;\n          options.locale = localePathResult.detectedLocale || _this.defaultLocale;\n          asPath = (0, _formatUrl).formatWithValidation(parsedAs);\n        }\n      }\n\n      const pages = yield _this.pageLoader.getPageList();\n      let resolvedAs = asPath;\n      const locale = typeof options.locale !== 'undefined' ? options.locale || undefined : _this.locale;\n      const isMiddlewareMatch = yield matchesMiddleware({\n        asPath: asPath,\n        locale: locale,\n        router: _this\n      });\n\n      if (process.env.__NEXT_HAS_REWRITES && asPath.startsWith('/')) {\n        let rewrites;\n        ({\n          __rewrites: rewrites\n        } = yield (0, _routeLoader).getClientBuildManifest());\n        const rewritesResult = (0, _resolveRewrites).default((0, _addBasePath).addBasePath((0, _addLocale).addLocale(asPath, _this.locale), true), pages, rewrites, parsed.query, p => resolveDynamicRoute(p, pages), _this.locales);\n\n        if (rewritesResult.externalDest) {\n          return;\n        }\n\n        resolvedAs = (0, _removeLocale).removeLocale((0, _removeBasePath).removeBasePath(rewritesResult.asPath), _this.locale);\n\n        if (rewritesResult.matchedPage && rewritesResult.resolvedHref) {\n          // if this directly matches a page we need to update the href to\n          // allow the correct page chunk to be loaded\n          pathname = rewritesResult.resolvedHref;\n          parsed.pathname = pathname;\n\n          if (!isMiddlewareMatch) {\n            url = (0, _formatUrl).formatWithValidation(parsed);\n          }\n        }\n      }\n\n      parsed.pathname = resolveDynamicRoute(parsed.pathname, pages);\n\n      if ((0, _isDynamic).isDynamicRoute(parsed.pathname)) {\n        pathname = parsed.pathname;\n        parsed.pathname = pathname;\n        Object.assign(query, (0, _routeMatcher).getRouteMatcher((0, _routeRegex).getRouteRegex(parsed.pathname))((0, _parsePath).parsePath(asPath).pathname) || {});\n\n        if (!isMiddlewareMatch) {\n          url = (0, _formatUrl).formatWithValidation(parsed);\n        }\n      } // Prefetch is not supported in development mode because it would trigger on-demand-entries\n\n\n      if (process.env.NODE_ENV !== 'production') {\n        return;\n      } // TODO: if the route middleware's data request\n      // resolves to is not an SSG route we should bust the cache\n      // but we shouldn't allow prefetch to keep triggering\n      // requests for SSP pages\n\n\n      const data = yield withMiddlewareEffects({\n        fetchData: () => fetchNextData({\n          dataHref: _this.pageLoader.getDataHref({\n            href: (0, _formatUrl).formatWithValidation({\n              pathname,\n              query\n            }),\n            skipInterpolation: true,\n            asPath: resolvedAs,\n            locale\n          }),\n          hasMiddleware: true,\n          isServerRender: _this.isSsr,\n          parseJSON: true,\n          inflightCache: _this.sdc,\n          persistCache: !_this.isPreview,\n          isPrefetch: true\n        }),\n        asPath: asPath,\n        locale: locale,\n        router: _this\n      });\n      /**\n      * If there was a rewrite we apply the effects of the rewrite on the\n      * current parameters for the prefetch.\n      */\n\n      if ((data == null ? void 0 : data.effect.type) === 'rewrite') {\n        parsed.pathname = data.effect.resolvedHref;\n        pathname = data.effect.resolvedHref;\n        query = _extends({}, query, data.effect.parsedAs.query);\n        resolvedAs = data.effect.parsedAs.pathname;\n        url = (0, _formatUrl).formatWithValidation(parsed);\n      }\n      /**\n      * If there is a redirect to an external destination then we don't have\n      * to prefetch content as it will be unused.\n      */\n\n\n      if ((data == null ? void 0 : data.effect.type) === 'redirect-external') {\n        return;\n      }\n\n      const route = (0, _removeTrailingSlash).removeTrailingSlash(pathname);\n      yield Promise.all([_this.pageLoader._isSsg(route).then(isSsg => {\n        return isSsg ? fetchNextData({\n          dataHref: (data == null ? void 0 : data.dataHref) || _this.pageLoader.getDataHref({\n            href: url,\n            asPath: resolvedAs,\n            locale: locale\n          }),\n          isServerRender: false,\n          parseJSON: true,\n          inflightCache: _this.sdc,\n          persistCache: !_this.isPreview,\n          isPrefetch: true,\n          unstable_skipClientCache: options.unstable_skipClientCache || options.priority\n        }).then(() => false) : false;\n      }), _this.pageLoader[options.priority ? 'loadPage' : 'prefetch'](route)]);\n    })();\n  }\n\n  fetchComponent(route) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const handleCancelled = getCancelledHandler({\n        route,\n        router: _this\n      });\n\n      try {\n        const componentResult = yield _this.pageLoader.loadPage(route);\n        handleCancelled();\n        return componentResult;\n      } catch (err) {\n        handleCancelled();\n        throw err;\n      }\n    })();\n  }\n\n  _getData(fn) {\n    let cancelled = false;\n\n    const cancel = () => {\n      cancelled = true;\n    };\n\n    this.clc = cancel;\n    return fn().then(data => {\n      if (cancel === this.clc) {\n        this.clc = null;\n      }\n\n      if (cancelled) {\n        const err = new Error('Loading initial props cancelled');\n        err.cancelled = true;\n        throw err;\n      }\n\n      return data;\n    });\n  }\n\n  _getFlightData(dataHref) {\n    // Do not cache RSC flight response since it's not a static resource\n    return fetchNextData({\n      dataHref,\n      isServerRender: true,\n      parseJSON: false,\n      inflightCache: this.sdc,\n      persistCache: false,\n      isPrefetch: false\n    }).then(_ref5 => {\n      let {\n        text\n      } = _ref5;\n      return {\n        data: text\n      };\n    });\n  }\n\n  getInitialProps(Component, ctx) {\n    const {\n      Component: App\n    } = this.components['/_app'];\n\n    const AppTree = this._wrapApp(App);\n\n    ctx.AppTree = AppTree;\n    return (0, _utils).loadGetInitialProps(App, {\n      AppTree,\n      Component,\n      router: this,\n      ctx\n    });\n  }\n\n  get route() {\n    return this.state.route;\n  }\n\n  get pathname() {\n    return this.state.pathname;\n  }\n\n  get query() {\n    return this.state.query;\n  }\n\n  get asPath() {\n    return this.state.asPath;\n  }\n\n  get locale() {\n    return this.state.locale;\n  }\n\n  get isFallback() {\n    return this.state.isFallback;\n  }\n\n  get isPreview() {\n    return this.state.isPreview;\n  }\n\n  constructor(pathname1, query1, as1, _ref6) {\n    let {\n      initialProps,\n      pageLoader,\n      App,\n      wrapApp,\n      Component,\n      err,\n      subscription,\n      isFallback,\n      locale,\n      locales,\n      defaultLocale,\n      domainLocales,\n      isPreview,\n      isRsc\n    } = _ref6;\n    // Server Data Cache\n    this.sdc = {};\n    this.isFirstPopStateEvent = true;\n    this._key = createKey();\n\n    this.onPopState = e => {\n      const {\n        isFirstPopStateEvent\n      } = this;\n      this.isFirstPopStateEvent = false;\n      const state = e.state;\n\n      if (!state) {\n        // We get state as undefined for two reasons.\n        //  1. With older safari (< 8) and older chrome (< 34)\n        //  2. When the URL changed with #\n        //\n        // In the both cases, we don't need to proceed and change the route.\n        // (as it's already changed)\n        // But we can simply replace the state with the new changes.\n        // Actually, for (1) we don't need to nothing. But it's hard to detect that event.\n        // So, doing the following for (1) does no harm.\n        const {\n          pathname,\n          query\n        } = this;\n        this.changeState('replaceState', (0, _formatUrl).formatWithValidation({\n          pathname: (0, _addBasePath).addBasePath(pathname),\n          query\n        }), (0, _utils).getURL());\n        return;\n      } // __NA is used to identify if the history entry can be handled by the app-router.\n\n\n      if (state.__NA) {\n        window.location.reload();\n        return;\n      }\n\n      if (!state.__N) {\n        return;\n      } // Safari fires popstateevent when reopening the browser.\n\n\n      if (isFirstPopStateEvent && this.locale === state.options.locale && state.as === this.asPath) {\n        return;\n      }\n\n      let forcedScroll;\n      const {\n        url,\n        as,\n        options,\n        key\n      } = state;\n\n      if (process.env.__NEXT_SCROLL_RESTORATION) {\n        if (manualScrollRestoration) {\n          if (this._key !== key) {\n            // Snapshot current scroll position:\n            try {\n              sessionStorage.setItem('__next_scroll_' + this._key, JSON.stringify({\n                x: self.pageXOffset,\n                y: self.pageYOffset\n              }));\n            } catch (e) {} // Restore old scroll position:\n\n\n            try {\n              const v = sessionStorage.getItem('__next_scroll_' + key);\n              forcedScroll = JSON.parse(v);\n            } catch (e1) {\n              forcedScroll = {\n                x: 0,\n                y: 0\n              };\n            }\n          }\n        }\n      }\n\n      this._key = key;\n      const {\n        pathname\n      } = (0, _parseRelativeUrl).parseRelativeUrl(url); // Make sure we don't re-render on initial load,\n      // can be caused by navigating back from an external site\n\n      if (this.isSsr && as === (0, _addBasePath).addBasePath(this.asPath) && pathname === (0, _addBasePath).addBasePath(this.pathname)) {\n        return;\n      } // If the downstream application returns falsy, return.\n      // They will then be responsible for handling the event.\n\n\n      if (this._bps && !this._bps(state)) {\n        return;\n      }\n\n      this.change('replaceState', url, as, Object.assign({}, options, {\n        shallow: options.shallow && this._shallow,\n        locale: options.locale || this.defaultLocale,\n        // @ts-ignore internal value not exposed on types\n        _h: 0\n      }), forcedScroll);\n    }; // represents the current component key\n\n\n    const route = (0, _removeTrailingSlash).removeTrailingSlash(pathname1); // set up the component cache (by route keys)\n\n    this.components = {}; // We should not keep the cache, if there's an error\n    // Otherwise, this cause issues when when going back and\n    // come again to the errored page.\n\n    if (pathname1 !== '/_error') {\n      this.components[route] = {\n        Component,\n        initial: true,\n        props: initialProps,\n        err,\n        __N_SSG: initialProps && initialProps.__N_SSG,\n        __N_SSP: initialProps && initialProps.__N_SSP,\n        __N_RSC: !!isRsc\n      };\n    }\n\n    this.components['/_app'] = {\n      Component: App,\n      styleSheets: []\n    }; // Backwards compat for Router.router.events\n    // TODO: Should be remove the following major version as it was never documented\n\n    this.events = Router.events;\n    this.pageLoader = pageLoader; // if auto prerendered and dynamic route wait to update asPath\n    // until after mount to prevent hydration mismatch\n\n    const autoExportDynamic = (0, _isDynamic).isDynamicRoute(pathname1) && self.__NEXT_DATA__.autoExport;\n\n    this.basePath = process.env.__NEXT_ROUTER_BASEPATH || '';\n    this.sub = subscription;\n    this.clc = null;\n    this._wrapApp = wrapApp; // make sure to ignore extra popState in safari on navigating\n    // back from external site\n\n    this.isSsr = true;\n    this.isLocaleDomain = false;\n    this.isReady = !!(self.__NEXT_DATA__.gssp || self.__NEXT_DATA__.gip || self.__NEXT_DATA__.appGip && !self.__NEXT_DATA__.gsp || !autoExportDynamic && !self.location.search && !process.env.__NEXT_HAS_REWRITES);\n\n    if (process.env.__NEXT_I18N_SUPPORT) {\n      this.locales = locales;\n      this.defaultLocale = defaultLocale;\n      this.domainLocales = domainLocales;\n      this.isLocaleDomain = !!(0, _detectDomainLocale).detectDomainLocale(domainLocales, self.location.hostname);\n    }\n\n    this.state = {\n      route,\n      pathname: pathname1,\n      query: query1,\n      asPath: autoExportDynamic ? pathname1 : as1,\n      isPreview: !!isPreview,\n      locale: process.env.__NEXT_I18N_SUPPORT ? locale : undefined,\n      isFallback\n    };\n    this._initialMatchesMiddlewarePromise = Promise.resolve(false);\n\n    if (typeof window !== 'undefined') {\n      // make sure \"as\" doesn't start with double slashes or else it can\n      // throw an error as it's considered invalid\n      if (!as1.startsWith('//')) {\n        // in order for `e.state` to work on the `onpopstate` event\n        // we have to register the initial route upon initialization\n        const options = {\n          locale\n        };\n        const asPath = (0, _utils).getURL();\n        this._initialMatchesMiddlewarePromise = matchesMiddleware({\n          router: this,\n          locale,\n          asPath\n        }).then(matches => {\n          options._shouldResolveHref = as1 !== pathname1;\n          this.changeState('replaceState', matches ? asPath : (0, _formatUrl).formatWithValidation({\n            pathname: (0, _addBasePath).addBasePath(pathname1),\n            query: query1\n          }), asPath, options);\n          return matches;\n        });\n      }\n\n      window.addEventListener('popstate', this.onPopState); // enable custom scroll restoration handling when available\n      // otherwise fallback to browser's default handling\n\n      if (process.env.__NEXT_SCROLL_RESTORATION) {\n        if (manualScrollRestoration) {\n          window.history.scrollRestoration = 'manual';\n        }\n      }\n    }\n  }\n\n}\n\nRouter.events = (0, _mitt).default();\n\nfunction matchesMiddleware(options) {\n  return Promise.resolve(options.router.pageLoader.getMiddlewareList()).then(items => {\n    const {\n      pathname: asPathname\n    } = (0, _parsePath).parsePath(options.asPath);\n    const cleanedAs = (0, _hasBasePath).hasBasePath(asPathname) ? (0, _removeBasePath).removeBasePath(asPathname) : asPathname;\n    return !!(items == null ? void 0 : items.some(_ref7 => {\n      let [regex, ssr] = _ref7;\n      return !ssr && new RegExp(regex).test((0, _addLocale).addLocale(cleanedAs, options.locale));\n    }));\n  });\n}\n\nfunction withMiddlewareEffects(options) {\n  return matchesMiddleware(options).then(matches => {\n    if (matches && options.fetchData) {\n      return options.fetchData().then(data => getMiddlewareData(data.dataHref, data.response, options).then(effect => ({\n        dataHref: data.dataHref,\n        json: data.json,\n        response: data.response,\n        text: data.text,\n        effect\n      }))).catch(_err => {\n        /**\n        * TODO: Revisit this in the future.\n        * For now we will not consider middleware data errors to be fatal.\n        * maybe we should revisit in the future.\n        */\n        return null;\n      });\n    }\n\n    return null;\n  });\n}\n\nfunction getMiddlewareData(source, response, options) {\n  const nextConfig = {\n    basePath: options.router.basePath,\n    i18n: {\n      locales: options.router.locales\n    },\n    trailingSlash: Boolean(process.env.__NEXT_TRAILING_SLASH)\n  };\n  const rewriteHeader = response.headers.get('x-nextjs-rewrite');\n  let rewriteTarget = rewriteHeader || response.headers.get('x-nextjs-matched-path');\n  const matchedPath = response.headers.get('x-matched-path');\n\n  if (!rewriteTarget && !(matchedPath == null ? void 0 : matchedPath.includes('__next_data_catchall'))) {\n    rewriteTarget = matchedPath;\n  }\n\n  if (rewriteTarget) {\n    if (rewriteTarget.startsWith('/')) {\n      const parsedRewriteTarget = (0, _parseRelativeUrl).parseRelativeUrl(rewriteTarget);\n      const pathnameInfo = (0, _getNextPathnameInfo).getNextPathnameInfo(parsedRewriteTarget.pathname, {\n        nextConfig,\n        parseData: true\n      });\n      const fsPathname = (0, _removeTrailingSlash).removeTrailingSlash(pathnameInfo.pathname);\n      return Promise.all([options.router.pageLoader.getPageList(), (0, _routeLoader).getClientBuildManifest()]).then(_ref8 => {\n        let [pages, {\n          __rewrites: rewrites\n        }] = _ref8;\n        let as = (0, _addLocale).addLocale(pathnameInfo.pathname, pathnameInfo.locale);\n\n        if ((0, _isDynamic).isDynamicRoute(as) || !rewriteHeader && pages.includes((0, _normalizeLocalePath).normalizeLocalePath((0, _removeBasePath).removeBasePath(as), options.router.locales).pathname)) {\n          const parsedSource = (0, _getNextPathnameInfo).getNextPathnameInfo((0, _parseRelativeUrl).parseRelativeUrl(source).pathname, {\n            parseData: true\n          });\n          as = (0, _addBasePath).addBasePath(parsedSource.pathname);\n          parsedRewriteTarget.pathname = as;\n        }\n\n        if (process.env.__NEXT_HAS_REWRITES) {\n          const result = (0, _resolveRewrites).default(as, pages, rewrites, parsedRewriteTarget.query, path => resolveDynamicRoute(path, pages), options.router.locales);\n\n          if (result.matchedPage) {\n            parsedRewriteTarget.pathname = result.parsedAs.pathname;\n            as = parsedRewriteTarget.pathname;\n            Object.assign(parsedRewriteTarget.query, result.parsedAs.query);\n          }\n        }\n\n        const resolvedHref = !pages.includes(fsPathname) ? resolveDynamicRoute((0, _normalizeLocalePath).normalizeLocalePath((0, _removeBasePath).removeBasePath(parsedRewriteTarget.pathname), options.router.locales).pathname, pages) : fsPathname;\n\n        if ((0, _isDynamic).isDynamicRoute(resolvedHref)) {\n          const matches = (0, _routeMatcher).getRouteMatcher((0, _routeRegex).getRouteRegex(resolvedHref))(as);\n          Object.assign(parsedRewriteTarget.query, matches || {});\n        }\n\n        return {\n          type: 'rewrite',\n          parsedAs: parsedRewriteTarget,\n          resolvedHref\n        };\n      });\n    }\n\n    const src = (0, _parsePath).parsePath(source);\n    const pathname = (0, _formatNextPathnameInfo).formatNextPathnameInfo(_extends({}, (0, _getNextPathnameInfo).getNextPathnameInfo(src.pathname, {\n      nextConfig,\n      parseData: true\n    }), {\n      defaultLocale: options.router.defaultLocale,\n      buildId: ''\n    }));\n    return Promise.resolve({\n      type: 'redirect-external',\n      destination: `${pathname}${src.query}${src.hash}`\n    });\n  }\n\n  const redirectTarget = response.headers.get('x-nextjs-redirect');\n\n  if (redirectTarget) {\n    if (redirectTarget.startsWith('/')) {\n      const src = (0, _parsePath).parsePath(redirectTarget);\n      const pathname = (0, _formatNextPathnameInfo).formatNextPathnameInfo(_extends({}, (0, _getNextPathnameInfo).getNextPathnameInfo(src.pathname, {\n        nextConfig,\n        parseData: true\n      }), {\n        defaultLocale: options.router.defaultLocale,\n        buildId: ''\n      }));\n      return Promise.resolve({\n        type: 'redirect-internal',\n        newAs: `${pathname}${src.query}${src.hash}`,\n        newUrl: `${pathname}${src.query}${src.hash}`\n      });\n    }\n\n    return Promise.resolve({\n      type: 'redirect-external',\n      destination: redirectTarget\n    });\n  }\n\n  return Promise.resolve({\n    type: 'next'\n  });\n}\n\nexports.default = Router;","map":{"version":3,"mappings":"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","names":["isLocalURL","interpolateAs","resolveHref","createKey","buildCancellationError","Object","assign","Error","cancelled","url","isAbsoluteUrl","locationOrigin","getLocationOrigin","resolved","URL","origin","hasBasePath","pathname","_","route","asPathname","query","interpolatedRoute","dynamicRegex","getRouteRegex","dynamicGroups","groups","dynamicMatches","getRouteMatcher","params","keys","every","param","value","repeat","optional","replaced","Array","isArray","replace","map","segment","encodeURIComponent","join","result","omit","object","omitted","forEach","key","includes","router","href","resolveAs","base","urlAsString","formatWithValidation","urlProtoMatch","match","urlAsStringNoProto","slice","length","urlParts","split","console","error","normalizedUrl","normalizeRepeatedSlashes","startsWith","asPath","finalUrl","normalizePathTrailingSlash","interpolatedAs","isDynamicRoute","searchParams","searchParamsToUrlQuery","hash","resolvedHref","stripOrigin","substring","prepareUrlAs","as","resolvedAs","hrefHadOrigin","asHadOrigin","preparedUrl","addBasePath","preparedAs","resolveDynamicRoute","pages","cleanPathname","removeTrailingSlash","denormalizePagePath","some","page","re","test","manualScrollRestoration","process","env","__NEXT_SCROLL_RESTORATION","window","history","v","sessionStorage","setItem","removeItem","n","SSG_DATA_NOT_FOUND","Symbol","fetchRetry","attempts","options","fetch","credentials","method","headers","then","response","ok","status","backgroundCache","fetchNextData","dataHref","inflightCache","isPrefetch","hasMiddleware","isServerRender","parseJSON","persistCache","isBackground","unstable_skipClientCache","cacheKey","location","getData","purpose","text","json","tryToParseAsJSON","notFound","markAssetError","data","NODE_ENV","get","catch","err","Promise","resolve","undefined","JSON","parse","Math","random","toString","handleHardNavigation","addLocale","locale","getCancelledHandler","cancel","clc","handleCancelled","Router","reload","back","push","_key","stringify","x","self","pageXOffset","y","pageYOffset","change","forcedScroll","_asyncToGenerator","isQueryUpdating","_h","shouldResolveHref","_shouldResolveHref","parsePath","nextState","_extends","_this","state","isReady","isSsr","prevLocale","__NEXT_I18N_SUPPORT","defaultLocale","parsedAs","parseRelativeUrl","removeBasePath","localePathResult","normalizeLocalePath","locales","detectedLocale","didNavigate","ref","detectedDomain","detectDomainLocale","domainLocales","isLocaleDomain","hostname","domain","asNoBasePath","http","ST","performance","mark","shallow","scroll","routeProps","_inFlightRoute","events","emit","cleanedAs","removeLocale","localeChange","onlyAHashChange","changeState","scrollToHash","set","components","isError","default","parsed","rewrites","__rewrites","all","pageLoader","getPageList","getClientBuildManifest","getMiddlewareList","urlIsNew","isMiddlewareMatch","matchesMiddleware","__NEXT_HAS_REWRITES","rewritesResult","resolveRewrites","p","externalDest","matchedPage","routeMatch","routeRegex","shouldInterpolate","missingParams","filter","warn","ref3","routeInfo","getRouteInfo","isPreview","prefixedAs","rewriteAs","localeResult","curRouteMatch","type","newUrl","newAs","destination","props","__N_SSG","__N_SSP","component","Component","unstable_scriptLoader","scripts","concat","script","handleClientScriptLoad","pageProps","__N_REDIRECT","__N_REDIRECT_BASE_PATH","parsedHref","__N_PREVIEW","notFoundRoute","fetchComponent","__NEXT_DATA__","statusCode","isValidShallowRoute","shouldScroll","resetScroll","isFallback","e","document","documentElement","lang","hashRegex","getURL","_shallow","__N","handleRouteInfoError","loadErrorFail","isAssetError","styleSheets","getInitialProps","gipErr","routeInfoErr","requestedRoute","existingInfo","cachedRouteInfo","fetchNextDataParams","getDataHref","skipInterpolation","sdc","withMiddlewareEffects","fetchData","effect","res","mod","__N_RSC","__next_rsc__","isValidElementType","require","useStreamedFlightData","shouldFetchData","_getData","flightInfo","__flight__","_getFlightData","getProperError","sub","beforePopState","cb","_bps","oldUrlNoHash","oldHash","newUrlNoHash","newHash","scrollTo","rawHash","decodeURIComponent","idEl","getElementById","scrollIntoView","nameEl","getElementsByName","prefetch","_isSsg","isSsg","priority","componentResult","loadPage","fn","ctx","App","AppTree","_wrapApp","loadGetInitialProps","constructor","initialProps","wrapApp","subscription","isRsc","isFirstPopStateEvent","onPopState","__NA","getItem","initial","autoExportDynamic","autoExport","basePath","__NEXT_ROUTER_BASEPATH","gssp","gip","appGip","gsp","search","_initialMatchesMiddlewarePromise","matches","addEventListener","scrollRestoration","mitt","items","regex","ssr","RegExp","getMiddlewareData","_err","source","nextConfig","i18n","trailingSlash","Boolean","__NEXT_TRAILING_SLASH","rewriteHeader","rewriteTarget","matchedPath","parsedRewriteTarget","pathnameInfo","getNextPathnameInfo","parseData","fsPathname","parsedSource","path","src","formatNextPathnameInfo","buildId","redirectTarget"],"sources":["../../../../shared/lib/router/router.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}