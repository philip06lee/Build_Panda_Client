{"ast":null,"code":"import _slicedToArray from\"C:/Users/philipslee/final panda/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{AppBar,Typography,Toolbar,Avatar,Button}from'@material-ui/core';import{Link,useHistory,useLocation}from'react-router-dom';import{useDispatch}from'react-redux';import decode from'jwt-decode';import cangosellLogo from'../../images/cangosellLogo.png';import cangosellText from'../../images/cangosellText.png';import*as actionType from'../../constants/actionTypes';import useStyles from'./styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Navbar=function Navbar(){var _useState=useState(JSON.parse(localStorage.getItem('profile'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var dispatch=useDispatch();var location=useLocation();var history=useHistory();var classes=useStyles();var logout=function logout(){dispatch({type:actionType.LOGOUT});history.push('/auth');setUser(null);};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())logout();}setUser(JSON.parse(localStorage.getItem('profile')));},[location]);return/*#__PURE__*/_jsxs(AppBar,{className:classes.appBar,position:\"static\",color:\"inherit\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/\",className:classes.brandContainer,children:[/*#__PURE__*/_jsx(\"img\",{component:Link,to:\"/\",src:cangosellText,alt:\"icon\",height:\"45px\"}),/*#__PURE__*/_jsx(\"img\",{className:classes.image,src:cangosellLogo,alt:\"icon\",height:\"45px\"}),/*#__PURE__*/_jsx(Typography,{className:classes.userName,variant:\"h6\",children:\"Let's Get Simple \"})]}),/*#__PURE__*/_jsx(Toolbar,{className:classes.toolbar,children:user!==null&&user!==void 0&&user.result?/*#__PURE__*/_jsxs(\"div\",{className:classes.profile,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.purple,alt:user===null||user===void 0?void 0:user.result.name,src:user===null||user===void 0?void 0:user.result.imageUrl,children:user===null||user===void 0?void 0:user.result.name.charAt(0)}),/*#__PURE__*/_jsx(Typography,{className:classes.userName,variant:\"h6\",children:user===null||user===void 0?void 0:user.result.name}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",className:classes.logout,color:\"secondary\",onClick:logout,children:\"Logout\"})]}):/*#__PURE__*/_jsx(Button,{component:Link,to:\"/auth\",variant:\"contained\",color:\"primary\",children:\"Sign In\"})})]});};export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","AppBar","Typography","Toolbar","Avatar","Button","Link","useHistory","useLocation","useDispatch","decode","cangosellLogo","cangosellText","actionType","useStyles","Navbar","JSON","parse","localStorage","getItem","user","setUser","dispatch","location","history","classes","logout","type","LOGOUT","push","token","decodedToken","exp","Date","getTime","appBar","brandContainer","image","userName","toolbar","result","profile","purple","name","imageUrl","charAt"],"sources":["C:/Users/philipslee/final panda/client/src/components/Navbar/Navbar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { AppBar, Typography, Toolbar, Avatar, Button } from '@material-ui/core';\r\nimport { Link, useHistory, useLocation } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport decode from 'jwt-decode';\r\nimport cangosellLogo from '../../images/cangosellLogo.png';\r\nimport cangosellText from '../../images/cangosellText.png';\r\nimport * as actionType from '../../constants/actionTypes';\r\nimport useStyles from './styles';\r\n\r\nconst Navbar = () => {\r\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n\r\n  const logout = () => {\r\n    dispatch({ type: actionType.LOGOUT });\r\n    history.push('/auth');\r\n    setUser(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const token = user?.token;\r\n\r\n    if (token) {\r\n      const decodedToken = decode(token);\r\n      if (decodedToken.exp * 1000 < new Date().getTime()) logout();\r\n    }\r\n\r\n    setUser(JSON.parse(localStorage.getItem('profile')));\r\n  }, [location]);\r\n\r\n  return (\r\n    <AppBar className={classes.appBar} position=\"static\" color=\"inherit\">\r\n      <Link to=\"/\" className={classes.brandContainer}>\r\n        <img component={Link} to=\"/\" src={cangosellText} alt=\"icon\" height=\"45px\" />\r\n        <img className={classes.image} src={cangosellLogo} alt=\"icon\" height=\"45px\" />\r\n        <Typography className={classes.userName} variant=\"h6\">Let's Get Simple </Typography></Link>     \r\n      <Toolbar className={classes.toolbar}>\r\n        {user?.result ? (\r\n          <div className={classes.profile}>\r\n            <Avatar className={classes.purple} alt={user?.result.name} src={user?.result.imageUrl}>{user?.result.name.charAt(0)}</Avatar>\r\n            <Typography className={classes.userName} variant=\"h6\">{user?.result.name}</Typography>\r\n            <Button variant=\"contained\" className={classes.logout} color=\"secondary\" onClick={logout}>Logout</Button>\r\n          </div>\r\n        ) : (\r\n          <Button component={Link} to=\"/auth\" variant=\"contained\" color=\"primary\">Sign In</Button>\r\n        )}\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}