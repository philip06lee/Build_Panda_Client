{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = initHeadManager;\nexports.isEqualNode = isEqualNode;\nexports.DOMAttributeNames = void 0;\nfunction initHeadManager() {\n  return {\n    mountedInstances: new Set(),\n    updateHead: function updateHead(head) {\n      var tags = {};\n      head.forEach(function (h) {\n        if (\n        // If the font tag is loaded only on client navigation\n        // it won't be inlined. In this case revert to the original behavior\n        h.type === 'link' && h.props['data-optimized-fonts']) {\n          if (document.querySelector(\"style[data-href=\\\"\".concat(h.props['data-href'], \"\\\"]\"))) {\n            return;\n          } else {\n            h.props.href = h.props['data-href'];\n            h.props['data-href'] = undefined;\n          }\n        }\n        var components = tags[h.type] || [];\n        components.push(h);\n        tags[h.type] = components;\n      });\n      var titleComponent = tags.title ? tags.title[0] : null;\n      var title = '';\n      if (titleComponent) {\n        var children = titleComponent.props.children;\n        title = typeof children === 'string' ? children : Array.isArray(children) ? children.join('') : '';\n      }\n      if (title !== document.title) document.title = title;\n      ['meta', 'base', 'link', 'style', 'script'].forEach(function (type) {\n        updateElements(type, tags[type] || []);\n      });\n    }\n  };\n}\nvar DOMAttributeNames = {\n  acceptCharset: 'accept-charset',\n  className: 'class',\n  htmlFor: 'for',\n  httpEquiv: 'http-equiv',\n  noModule: 'noModule'\n};\nexports.DOMAttributeNames = DOMAttributeNames;\nfunction reactElementToDOM(_ref) {\n  var type = _ref.type,\n    props = _ref.props;\n  var el = document.createElement(type);\n  for (var p in props) {\n    if (!props.hasOwnProperty(p)) continue;\n    if (p === 'children' || p === 'dangerouslySetInnerHTML') continue;\n    // we don't render undefined props to the DOM\n    if (props[p] === undefined) continue;\n    var attr = DOMAttributeNames[p] || p.toLowerCase();\n    if (type === 'script' && (attr === 'async' || attr === 'defer' || attr === 'noModule')) {\n      el[attr] = !!props[p];\n    } else {\n      el.setAttribute(attr, props[p]);\n    }\n  }\n  var children = props.children,\n    dangerouslySetInnerHTML = props.dangerouslySetInnerHTML;\n  if (dangerouslySetInnerHTML) {\n    el.innerHTML = dangerouslySetInnerHTML.__html || '';\n  } else if (children) {\n    el.textContent = typeof children === 'string' ? children : Array.isArray(children) ? children.join('') : '';\n  }\n  return el;\n}\nfunction isEqualNode(oldTag, newTag) {\n  if (oldTag instanceof HTMLElement && newTag instanceof HTMLElement) {\n    var nonce = newTag.getAttribute('nonce');\n    // Only strip the nonce if `oldTag` has had it stripped. An element's nonce attribute will not\n    // be stripped if there is no content security policy response header that includes a nonce.\n    if (nonce && !oldTag.getAttribute('nonce')) {\n      var cloneTag = newTag.cloneNode(true);\n      cloneTag.setAttribute('nonce', '');\n      cloneTag.nonce = nonce;\n      return nonce === oldTag.nonce && oldTag.isEqualNode(cloneTag);\n    }\n  }\n  return oldTag.isEqualNode(newTag);\n}\nfunction updateElements(type, components) {\n  var headEl = document.getElementsByTagName('head')[0];\n  var headCountEl = headEl.querySelector('meta[name=next-head-count]');\n  if (process.env.NODE_ENV !== 'production') {\n    if (!headCountEl) {\n      console.error('Warning: next-head-count is missing. https://nextjs.org/docs/messages/next-head-count-missing');\n      return;\n    }\n  }\n  var headCount = Number(headCountEl.content);\n  var oldTags = [];\n  for (var i = 0, j = headCountEl.previousElementSibling; i < headCount; i++, j = (j == null ? void 0 : j.previousElementSibling) || null) {\n    var ref;\n    if ((j == null ? void 0 : (ref = j.tagName) == null ? void 0 : ref.toLowerCase()) === type) {\n      oldTags.push(j);\n    }\n  }\n  var newTags = components.map(reactElementToDOM).filter(function (newTag) {\n    for (var k = 0, len = oldTags.length; k < len; k++) {\n      var oldTag = oldTags[k];\n      if (isEqualNode(oldTag, newTag)) {\n        oldTags.splice(k, 1);\n        return false;\n      }\n    }\n    return true;\n  });\n  oldTags.forEach(function (t) {\n    var ref;\n    return (ref = t.parentNode) == null ? void 0 : ref.removeChild(t);\n  });\n  newTags.forEach(function (t) {\n    return headEl.insertBefore(t, headCountEl);\n  });\n  headCountEl.content = (headCount - oldTags.length + newTags.length).toString();\n}\nif ((typeof exports.default === 'function' || typeof exports.default === 'object' && exports.default !== null) && typeof exports.default.__esModule === 'undefined') {\n  Object.defineProperty(exports.default, '__esModule', {\n    value: true\n  });\n  Object.assign(exports.default, exports);\n  module.exports = exports.default;\n}","map":{"version":3,"mappings":"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","names":["initHeadManager","isEqualNode","mountedInstances","Set","updateHead","head","tags","forEach","h","type","props","document","querySelector","href","undefined","components","push","titleComponent","title","children","Array","isArray","join","updateElements","DOMAttributeNames","acceptCharset","className","htmlFor","httpEquiv","noModule","reactElementToDOM","el","createElement","p","hasOwnProperty","attr","toLowerCase","setAttribute","dangerouslySetInnerHTML","innerHTML","__html","textContent","oldTag","newTag","HTMLElement","nonce","getAttribute","cloneTag","cloneNode","headEl","getElementsByTagName","headCountEl","process","env","NODE_ENV","console","error","headCount","Number","content","oldTags","i","j","previousElementSibling","tagName","newTags","map","filter","k","len","length","splice","t","parentNode","removeChild","insertBefore","toString"],"sources":["../../client/head-manager.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}